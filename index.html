<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulário de Endereço</title>
    <link rel="stylesheet" href="style.css">
    <script>
        const dddMap = {
            'AC': '68',
            'AL': '82',
            'AP': '96',
            'AM': '92',
            'BA': '71',
            'CE': '85',
            'DF': '61',
            'ES': '27',
            'GO': '62',
            'MA': '98',
            'MT': '65',
            'MS': '67',
            'MG': '31',
            'PA': '91',
            'PB': '83',
            'PR': '41',
            'PE': '81',
            'PI': '86',
            'RJ': '21',
            'RN': '84',
            'RS': '51',
            'RO': '69',
            'RR': '95',
            'SC': '48',
            'SP': '11',
            'SE': '79',
            'TO': '63',
        };

        function formatCep(value) {
            // Remove todos os caracteres que não são dígitos
            value = value.replace(/\D/g, '');
            // Formata o CEP
            return value.replace(/(\d{5})(\d)/, '$1-$2');
        }

        function formatCpf(value) {
            // Remove todos os caracteres que não são dígitos
            value = value.replace(/\D/g, '');
            // Formata o CPF
            return value.replace(/(\d{3})(\d)/, '$1.$2').replace(/(\d{3})(\d)/, '$1.$2').replace(/(\d{2})$/, '-$1');
        }

        function formatCelular(value) {
            // Remove todos os caracteres que não são dígitos
            value = value.replace(/\D/g, '');
            // Adiciona o hífen entre o nono e o décimo dígito
            return value.replace(/(\d{5})(\d)/, '$1-$2');
        }

        function buscarEndereco() {
            let cep = document.getElementById('cep').value;
            let urlAPI = `https://viacep.com.br/ws/${cep}/json/`;

            fetch(urlAPI)
                .then(response => response.json())
                .then(dados => {
                    document.getElementById('logradouro').value = dados.logradouro;
                    document.getElementById('bairro').value = dados.bairro;
                    document.getElementById('cidade').value = dados.localidade;
                    document.getElementById('uf').value = dados.uf;

                    // Atribuir o DDD com base no estado
                    const uf = dados.uf;
                    document.getElementById('ddd').value = dddMap[uf] || '';
                })
                .catch(error => console.error('Erro ao buscar o endereço:', error));
        }

        function formatarCampos() {
            const cepInput = document.getElementById('cep');
            const cpfInput = document.getElementById('cpf');
            const celularInput = document.getElementById('celular');

            cepInput.value = formatCep(cepInput.value);
            cpfInput.value = formatCpf(cpfInput.value);
            celularInput.value = formatCelular(celularInput.value);
        }
    </script>
</head>
<body>
    <form onsubmit="event.preventDefault(); buscarEndereco();">
        <div>
            <label for="nome">Nome Completo:</label>
            <input type="text" id="nome" placeholder="Digite seu nome completo" required>
        </div>

        <div>
            <label for="cpf">CPF:</label>
            <input type="text" id="cpf" placeholder="Digite seu CPF" required oninput="formatarCampos()">
        </div>

        <div>
            <label for="celular">Número de Celular:</label>
            <input type="text" id="celular" placeholder="Digite seu número de celular" required oninput="formatarCampos()">
        </div>

        <div>
            <label for="cep">CEP:</label>
            <input type="text" id="cep" placeholder="Digite o CEP" required oninput="formatarCampos()">
            <button type="submit">Buscar</button>
        </div>

        <div class="cidade-uf-container">
            <div>
                <label for="cidade">Cidade:</label>
                <input type="text" id="cidade" placeholder="Digite a cidade" readonly>
            </div>
            <div>
                <label for="uf">UF:</label>
                <select id="uf" required>
                    <option value="" disabled selected>Selecione</option>
                    <option value="AC">Acre (AC)</option>
                    <option value="AL">Alagoas (AL)</option>
                    <option value="AP">Amapá (AP)</option>
                    <option value="AM">Amazonas (AM)</option>
                    <option value="BA">Bahia (BA)</option>
                    <option value="CE">Ceará (CE)</option>
                    <option value="DF">Distrito Federal (DF)</option>
                    <option value="ES">Espírito Santo (ES)</option>
                    <option value="GO">Goiás (GO)</option>
                    <option value="MA">Maranhão (MA)</option>
                    <option value="MT">Mato Grosso (MT)</option>
                    <option value="MS">Mato Grosso do Sul (MS)</option>
                    <option value="MG">Minas Gerais (MG)</option>
                    <option value="PA">Pará (PA)</option>
                    <option value="PB">Paraíba (PB)</option>
                    <option value="PR">Paraná (PR)</option>
                    <option value="PE">Pernambuco (PE)</option>
                    <option value="PI">Piauí (PI)</option>
                    <option value="RJ">Rio de Janeiro (RJ)</option>
                    <option value="RN">Rio Grande do Norte (RN)</option>
                    <option value="RS">Rio Grande do Sul (RS)</option>
                    <option value="RO">Rondônia (RO)</option>
                    <option value="RR">Roraima (RR)</option>
                    <option value="SC">Santa Catarina (SC)</option>
                    <option value="SP">São Paulo (SP)</option>
                    <option value="SE">Sergipe (SE)</option>
                    <option value="TO">Tocantins (TO)</option>
                </select>
            </div>
            <div>
                <label for="ddd">DDD:</label>
                <input type="text" id="ddd" placeholder="DDD" readonly>
            </div>
        </div>

        <div>
            <label for="logradouro">Logradouro:</label>
            <input type="text" id="logradouro" placeholder="Digite o logradouro" readonly>
        </div>

        <div>
            <label for="bairro">Bairro:</label>
            <input type="text" id="bairro" placeholder="Digite o bairro" readonly>
        </div>
    </form>
    <script src="script.js"></script>
</body>
</html>